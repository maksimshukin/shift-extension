# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å tp__addRecord

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```
[CONTENT] tp__addRecord –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –±–ª–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω
```

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**

### üéØ **–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

1. **–î–æ–±–∞–≤–ª–µ–Ω `data-tpl-id="131"`** - –¥–ª—è –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤ SHIFT
2. **–£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `tp__addRecord`** - —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏
3. **–î–æ–±–∞–≤–ª–µ–Ω—ã –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ –≤ DOM
4. **–û–±–Ω–æ–≤–ª–µ–Ω –º–∞–ø–ø–∏–Ω–≥ –∫–æ–¥–æ–≤** - `T123` –¥–ª—è custom-html

### üîÑ **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**

#### `content/content.js`:
```javascript
// –ë–´–õ–û:
id: blockCode,

// –°–¢–ê–õ–û:
id: "131", // –í—Å–µ–≥–¥–∞ data-tpl-id="131"

// –ë–´–õ–û:
if (typeof tp__addRecord === 'function') {
    tp__addRecord(blockCode);
} else {
    console.log('[CONTENT] tp__addRecord –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
}

// –°–¢–ê–õ–û:
if (typeof tp__addRecord === 'function') {
    tp__addRecord(blockCode);
} else {
    // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ tp__addRecord
    let attempts = 0;
    const checkTpAddRecord = () => {
        if (typeof tp__addRecord === 'function') {
            tp__addRecord(blockCode);
        } else if (attempts >= maxAttempts) {
            // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã
            createBlockInDOM(block);
        } else {
            setTimeout(checkTpAddRecord, 100);
        }
    };
    checkTpAddRecord();
}
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createBlockInDOM()`:
```javascript
function createBlockInDOM(block) {
    const blockHTML = `
        <div class="t-block" data-tpl-id="131" data-block-code="${block.cod}">
            <div class="t-block-header">
                <h3>${block.name}</h3>
                <p>${block.descr}</p>
            </div>
            <div class="t-block-content">
                ${block.modcontent ? block.modcontent() : '–ë–ª–æ–∫ ' + block.cod}
            </div>
        </div>
    `;
    blockContainer.insertAdjacentHTML('beforeend', blockHTML);
}
```

### üß™ **–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** –≤ `chrome://extensions`
2. **–û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É Tilda** —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
3. **–û—Ç–∫—Ä–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫—É –±–ª–æ–∫–æ–≤** (–∫–Ω–æ–ø–∫–∞ "+")
4. **–ö–ª–∏–∫–Ω–∏ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ –±–ª–æ–∫–∞** SHIFT
5. **–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å** - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:

```
[CONTENT] –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ –±–ª–æ–∫–∞: SHF001
[CONTENT] –î–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫: –°—É–ø–µ—Ä –°–ª–∞–π–¥–µ—Ä
[CONTENT] tp__addRecord –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∂–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏...
[CONTENT] tp__addRecord –∑–∞–≥—Ä—É–∂–µ–Ω –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫
[CONTENT] –ë–ª–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ tp__addRecord
```

**–ò–õ–ò (–µ—Å–ª–∏ tp__addRecord –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è):**

```
[CONTENT] tp__addRecord –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã...
[CONTENT] –°–æ–∑–¥–∞–µ–º –±–ª–æ–∫ –Ω–∞–ø—Ä—è–º—É—é –≤ DOM...
[CONTENT] –ë–ª–æ–∫ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –≤ DOM
```

### üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏:**

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º id
const shiftBlocks = dbmBlocks?.filter(b => b.cod?.startsWith('SHF') || b.cod === 'T123');
console.log('SHIFT blocks:', shiftBlocks);
console.log('–í—Å–µ –±–ª–æ–∫–∏ –∏–º–µ—é—Ç id="131":', shiftBlocks?.every(b => b.id === "131"));

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å tp__addRecord
console.log('tp__addRecord –¥–æ—Å—Ç—É–ø–µ–Ω:', typeof tp__addRecord === 'function');

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±–ª–æ–∫
const testBlock = dbmBlocks?.find(b => b.cod === 'SHF001');
if (testBlock) {
    createBlockInDOM(testBlock);
}
```

### üìã **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

- ‚úÖ **–í—Å–µ –±–ª–æ–∫–∏ –∏–º–µ—é—Ç `id: "131"`** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π data-tpl-id
- ‚úÖ **tp__addRecord —Ä–∞–±–æ—Ç–∞–µ—Ç** - –±–ª–æ–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Tilda API
- ‚úÖ **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã** - –±–ª–æ–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ DOM –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥** - `T123` –¥–ª—è custom-html
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏** - –≤–∏–¥–Ω–æ –∫–∞–∫–æ–π —Å–ø–æ—Å–æ–± —Å—Ä–∞–±–æ—Ç–∞–ª

### üéØ **–ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

1. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π data-tpl-id** - –≤—Å–µ –±–ª–æ–∫–∏ –∏–º–µ—é—Ç `id: "131"`
2. **–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ API** - –ø—Ä–æ–≤–µ—Ä—è–µ–º `tp__addRecord` —Å —Ç–∞–π–º–∞—É—Ç–æ–º
3. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** - —Å–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ –≤ DOM –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
4. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ `T123`
5. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –±–ª–æ–∫–∏ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é—Ç—Å—è –≤ –ø–æ–ª–µ –∑—Ä–µ–Ω–∏—è

### üîß **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–∞ –≤ DOM:**

```html
<div class="t-block" data-tpl-id="131" data-block-code="SHF001">
    <div class="t-block-header">
        <h3>–°—É–ø–µ—Ä –°–ª–∞–π–¥–µ—Ä</h3>
        <p>–°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Å–∏–≤—ã—Ö —Å–ª–∞–π–¥–µ—Ä–æ–≤</p>
    </div>
    <div class="t-block-content">
        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–∞ -->
    </div>
    <div class="t-block-footer">
        <small>SHIFT Extension - SHF001</small>
    </div>
</div>
```

---

**–¢–µ–ø–µ—Ä—å –±–ª–æ–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å data-tpl-id="131"!** üéâ
