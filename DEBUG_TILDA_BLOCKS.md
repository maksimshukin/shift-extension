# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å dbmCreateShiftBlocks

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```
[CONTENT] –§—É–Ω–∫—Ü–∏—è dbmCreateShiftBlocks –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
```

## üîß **–ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

### 1. **–ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –≤ `content.js`:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `typeof`
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 100–º—Å
- –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å "CreateShift" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ `fetch` + `eval`

### 2. **–û—Ç–ª–∞–¥–∫–∞ –≤ `tilda-blocks.js`:**
- –õ–æ–≥–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∫—Ä–∏–ø—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ `window` –∏ `document`
- –õ–æ–≥–∏ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏

### 3. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º:**
- –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ –≤—Ä—É—á–Ω—É—é –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞

## üß™ **–ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**

### **–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å**
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –æ—Ç–∫—Ä—ã—Ç–∏—è Tilda, –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:

```
[TILDA-BLOCKS] –°–∫—Ä–∏–ø—Ç tilda-blocks.js –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...
[TILDA-BLOCKS] typeof window: object
[TILDA-BLOCKS] typeof document: object
[CONTENT] –°–∫—Ä–∏–ø—Ç tilda-blocks.js –∑–∞–≥—Ä—É–∂–µ–Ω
[CONTENT] –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å dbmCreateShiftBlocks...
[CONTENT] typeof dbmCreateShiftBlocks: function
[CONTENT] typeof window.dbmCreateShiftBlocks: function
```

### **–®–∞–≥ 2: –ï—Å–ª–∏ –ª–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è**
```javascript
// –ü—Ä–æ–≤–µ—Ä—å, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–∏ —Å–∫—Ä–∏–ø—Ç –≤–æ–æ–±—â–µ
fetch(chrome.runtime.getURL('content/tilda-blocks.js'))
  .then(response => response.text())
  .then(text => console.log('–°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω:', text.substring(0, 200)))
  .catch(error => console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error));
```

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å manifest.json**
–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª —É–∫–∞–∑–∞–Ω –≤ `web_accessible_resources`:
```json
"web_accessible_resources": [
  {
    "resources": ["content/tilda-blocks.js"],
    "matches": ["*://tilda.cc/*", "*://tilda.ws/*", "*://tilda.ru/*"]
  }
]
```

### **–®–∞–≥ 4: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏
testShiftIntegration.forceCreateBlocks();
```

## üîç **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:**

### 1. **–°–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è**
- –ü—Ä–æ–≤–µ—Ä—å `manifest.json`
- –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å URL –≤ `chrome.runtime.getURL()`

### 2. **–°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –Ω–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è**
- –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ `tilda-blocks.js`
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
- –í–æ–∑–º–æ–∂–Ω–∞ –æ—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ

### 3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**
- –°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- `window` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–±–ª–µ–º—ã —Å CORS

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

### **–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
[TILDA-BLOCKS] –°–∫—Ä–∏–ø—Ç tilda-blocks.js –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...
[TILDA-BLOCKS] –≠–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ window.dbmCreateShiftBlocks
[TILDA-BLOCKS] window.dbmCreateShiftBlocks —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: function
[CONTENT] –§—É–Ω–∫—Ü–∏—è dbmCreateShiftBlocks –Ω–∞–π–¥–µ–Ω–∞ –ø–æ—Å–ª–µ eval!
[CONTENT] –°–æ–∑–¥–∞–µ–º –±–ª–æ–∫–∏ SHIFT –¥–ª—è Tilda...
[SHIFT] –ë–ª–æ–∫–∏ SHIFT —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Tilda!
```

### **–ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:**
```
[CONTENT] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ tilda-blocks.js
[CONTENT] –ü–æ–ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º...
[CONTENT] –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ fetch, –≤—ã–ø–æ–ª–Ω—è–µ–º...
[CONTENT] –§—É–Ω–∫—Ü–∏—è –≤—Å–µ –µ—â–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —Å–æ–∑–¥–∞–µ–º –±–ª–æ–∫–∏ –≤—Ä—É—á–Ω—É—é...
[CONTENT] –°–æ–∑–¥–∞–µ–º –±–ª–æ–∫–∏ SHIFT –≤—Ä—É—á–Ω—É—é...
```

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** –≤ `chrome://extensions`
2. **–û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É Tilda** —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
3. **–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ª–æ–≥–æ–≤
4. **–ó–∞–ø—É—Å—Ç–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É** –≤ –∫–æ–Ω—Å–æ–ª–∏:
   ```javascript
   testShiftIntegration.runAllTests();
   ```

---

**–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã!** üîç
