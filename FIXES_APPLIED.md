# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º - –ü–†–ò–ú–ï–ù–ï–ù–´

## üéØ **–ü—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

### **‚ùå –ü—Ä–æ–±–ª–µ–º—ã:**
1. –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Ö–æ–¥ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –≤ popup
2. –°–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ "[SHIFT] –ù–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Tilda, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é"

### **‚úÖ –†–µ—à–µ–Ω–∏—è:**

## üéØ **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Tilda –≤ shift.js:**

**–ë—ã–ª–æ:**
```javascript
if (!window.location.href.includes('tilda.cc')) {
    console.log('[SHIFT] –ù–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Tilda, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é');
    return;
}
```

**–°—Ç–∞–ª–æ:**
```javascript
const isTildaPage = window.location.href.includes('tilda.cc') || 
                   window.location.href.includes('tilda.ws') || 
                   window.location.href.includes('tilda.ru');

if (!isTildaPage) {
    console.log('[SHIFT] –ù–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Tilda, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é');
    console.log('[SHIFT] –¢–µ–∫—É—â–∏–π URL:', window.location.href);
    return;
}

console.log('[SHIFT] –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Tilda, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é');
```

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `tilda.ws` –∏ `tilda.ru`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ URL –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

## üéØ **2. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ shift.js:**

```javascript
async function initShiftExtension() {
    console.log('[SHIFT] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SHIFT Extension...');
    console.log('[SHIFT] –¢–µ–∫—É—â–∏–π URL:', window.location.href);
    console.log('[SHIFT] Document ready state:', document.readyState);
    // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}

// –í –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞:
console.log('[SHIFT] –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é SHIFT Extension...');
initShiftExtension();
console.log('[SHIFT] –§–∞–π–ª shift.js –∑–∞–≥—Ä—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é');
```

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ URL –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## üéØ **3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å popup:**

**–î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –∏ fallback –¥–ª—è Supabase:**
```javascript
let supabaseWaitAttempts = 0;
const maxSupabaseWaitAttempts = 50; // 5 —Å–µ–∫—É–Ω–¥ –º–∞–∫—Å–∏–º—É–º

async function waitForSupabase() {
    supabaseWaitAttempts++;
    
    console.log(`[POPUP] –ü–æ–ø—ã—Ç–∫–∞ ${supabaseWaitAttempts}/${maxSupabaseWaitAttempts} –∑–∞–≥—Ä—É–∑–∫–∏ Supabase...`);
    console.log('[POPUP] SUPABASE_CONFIG:', !!window.SUPABASE_CONFIG);
    console.log('[POPUP] window.supabase:', !!window.supabase);
    
    if (window.SUPABASE_CONFIG && window.supabase) {
        await initPopup();
    } else if (supabaseWaitAttempts >= maxSupabaseWaitAttempts) {
        console.warn('[POPUP] –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è Supabase, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º popup –±–µ–∑ Supabase...');
        await initPopupWithoutSupabase();
    } else {
        setTimeout(waitForSupabase, 100);
    }
}
```

**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è fallback:**
```javascript
async function initPopupWithoutSupabase() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ Supabase
    // - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
    // - –ó–∞–∫—Ä—ã—Ç–∏–µ popup
    // - –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
}
```

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è Supabase (5 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ Supabase
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏

## üß™ **–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### **1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ shift.js:**

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** –≤ `chrome://extensions`
2. **–û—Ç–∫—Ä–æ–π –ª—é–±—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É Tilda** (tilda.cc, tilda.ws, tilda.ru)
3. **–û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** (F12)
4. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
[SHIFT] –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é SHIFT Extension...
[SHIFT] –§–∞–π–ª shift.js –∑–∞–≥—Ä—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
[SHIFT] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SHIFT Extension...
[SHIFT] –¢–µ–∫—É—â–∏–π URL: https://tilda.cc/page/?pageid=123456
[SHIFT] Document ready state: complete
[SHIFT] –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Tilda, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
[SHIFT CONFIG] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞: 4 —Ä–µ—à–µ–Ω–∏–π
[SHIFT] –ù–∞—á–∏–Ω–∞–µ–º –æ—Ç—Ä–∏—Å–æ–≤–∫—É –ø–∞–Ω–µ–ª–∏ SHIFT...
[SHIFT] SHIFT Extension —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!
```

### **2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ popup:**

1. **–ö–ª–∏–∫–Ω–∏ –ø–æ –∏–∫–æ–Ω–∫–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**
2. **–û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å popup** (F12 –≤ popup)
3. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ (—Å Supabase):**
```
[POPUP] –ü–æ–ø—ã—Ç–∫–∞ 1/50 –∑–∞–≥—Ä—É–∑–∫–∏ Supabase...
[POPUP] SUPABASE_CONFIG: true
[POPUP] window.supabase: true
[POPUP] Supabase –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º popup...
[POPUP] Supabase client created: [object Object]
[POPUP] Form listeners attached.
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ (–±–µ–∑ Supabase):**
```
[POPUP] –ü–æ–ø—ã—Ç–∫–∞ 50/50 –∑–∞–≥—Ä—É–∑–∫–∏ Supabase...
[POPUP] SUPABASE_CONFIG: false
[POPUP] window.supabase: false
[POPUP] –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è Supabase, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º popup –±–µ–∑ Supabase...
[POPUP] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è popup –±–µ–∑ Supabase...
[POPUP] –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
```

### **3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫:**

1. **–û—Ç–∫—Ä–æ–π popup —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**
2. **–ö–ª–∏–∫–Ω–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"** - –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
3. **–ö–ª–∏–∫–Ω–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–í—Ö–æ–¥"** - –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
4. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤–∫–ª–∞–¥–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

## üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:**

### **–ï—Å–ª–∏ shift.js –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–æ–≤–µ—Ä—å URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
   ```javascript
   console.log('Current URL:', window.location.href);
   // –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å tilda.cc, tilda.ws –∏–ª–∏ tilda.ru
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞:**
   ```javascript
   // –í DevTools ‚Üí Network –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ shift.js
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏:**
   ```javascript
   // –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   ```

### **–ï—Å–ª–∏ popup –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–æ–≤–µ—Ä—å –∑–∞–≥—Ä—É–∑–∫—É Supabase:**
   ```javascript
   console.log('Supabase config:', window.SUPABASE_CONFIG);
   console.log('Supabase library:', window.supabase);
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å —Ç–∞–π–º–∞—É—Ç:**
   ```javascript
   // –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å fallback:**
   ```javascript
   // –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   ```

## üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:** 2
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:** 8 –Ω–æ–≤—ã—Ö –ª–æ–≥–æ–≤
- **–î–æ–±–∞–≤–ª–µ–Ω–æ fallback —Ñ—É–Ω–∫—Ü–∏–π:** 1
- **–£–ª—É—á—à–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** +2 –¥–æ–º–µ–Ω–∞ Tilda

## ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**

### **1. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–æ–º–µ–Ω–æ–≤:**
- –¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –¥–æ–º–µ–Ω—ã Tilda: `.cc`, `.ws`, `.ru`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π

### **2. –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å popup:**
- Popup —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ Supabase
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è

### **3. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–µ–≥—á–µ –Ω–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

**‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã! –¢–µ–ø–µ—Ä—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** üéâ

### **üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Tilda
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å popup
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ Supabase
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
